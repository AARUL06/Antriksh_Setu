const knowledgeBase = {
  greetings: `Greetings received loud and clear, Hii!
Whether you are here to explore the horizons of outer-space, or analyze a project of yours, or just exchange a few bytes of wisdom;
I'm ready to dive in. What shall we tackle together today?`,

  cost_estimation: `Cost estimation is the process of predicting the total expenses required for a project before it is executed. A cost estimation model is a structured method to calculate these expenses which involves: 
1) data inputs: payload weight, rocket type, orbit altitude, mission duration.
2) cost factors: launch cost, satellite production, fuel, insurance and operational expenses.
3) formulas and algorithms: mathematical models or software that compute the total cost based on inputs.

Simulation Guide-
simulation allows you to model different scenarios without actually launching anything .
step 1 -input satellite specifications .
step 2- choose launch vehicle and mission duration .
step 3- run the simulation to get estimated costs for each component.
step 4- adjust parameters (example: choose reusable Rockets ,reduce payload weight )to see cost changes.`,

  knowledge_hub: `it is a centralised platform  providing reliable information about the space economy .it includes:
1)articles and research papers covering satellite commercialisation space missions and space policy 
2)case studies (examples of companies like space X, ISRO ,blue origin and their business models)
3)market data: insights into satellite launches, orbital services ,and space tourism 
4)Trends and analysis: updates on new technology ,regulations and investment opportunities

(real data example) Global space economy is valued at around  500 billion dollars in 2025 with satellite services contributing over 270 billion dollars (space Foundation 2025)`,

  sustainability_hub: `The sustainability hub is an upcoming feature of focuses on reducing environmental impact and promoting safe practices -
it provides information on orbital degree how to minimise collisions and space junk. resource efficiency: optimising rocket fuel use, satellite design and mission planning 
`,

  buy_sell_commerce: `The core of the Nexus is its ability to facilitate the buying and selling of space-related services and products, which are structured as Projects. This commerce is made efficient and trustworthy by the platform's unique standardization requirements.
1. The Seller's Role: Defining the Project
A seller wishing to list a product or service must first engage with the standardization process:
 * Reference the Base Project: The seller uses the official Base Project template, which acts as the mandatory structural benchmark for all listings. This template defines all necessary technical, operational, and regulatory fields.
 * Create the Project File: The seller compiles a Project File. This file is a specific data set that describes their unique offering (the Project) but organizes the information according to the strict, defined structure of the Base Project.
 * Listing and Scoring: This standardized Project File is then submitted to the Nexus database. Critically, the file is immediately analyzed by the Sustainability Hub to calculate its environmental score, which determines its initial visibility.
2. The Buyer's Role: Targeted Search and Trust
The buyer uses the same structure to find exactly what is needed:
 * Search by Standard: Buyers do not search for vague terms; they search using the specific technical parameters defined in the Base Project (e.g., required orbit, data rate, or payload capacity).
 * Accurate Matching: Because every listing is a standardized Project File, the Nexus database can perform highly accurate, technical matching. The search immediately returns only those projects guaranteed to be compatible with the buyer's needs.
 * Trust and Prioritization: Buyers are able to quickly filter and trust the results based on the Sustainability Score. Projects with high scores rank higher due to the SEO mechanism, allowing the buyer to prioritize vendors who are proven to be responsible and compliant with the system's sustainability rules.
3. The Transaction Mechanism
The Nexus acts as the central link, ensuring clarity and facilitating the agreement:
 * Transparency: The standardization of the Project File ensures maximum transparency. Both parties understand the exact specifications, compliance record, and disposal plan of the service or product being traded, reducing technical and legal ambiguities.
 * Formal Exchange: The marketplace serves as the portal where the transaction for the Project (service/product) is formalized, leveraging the defined Project File as the definitive description of the asset being exchanged.
In essence, standardization transforms the complex exchange of unique space technologies into a predictable, high-integrity commercial transaction.
`,
  software_guide: `GUIDE ON HOW TO USE WEBSITE FEATURES AND NAVIGATION:`,

  rocket_info: `it could include 
rocket names (Falcon 9, PSLV ,ariane 5). technical specs (payload capacity, height ,thrust ,number of stages).
 launch records (success /failure history ,latest launch dates)
 manufacturer details (space X ,ISRO ,esa blue origin)

 information on rockets and space transportation 
basics of Rockets- 

1)a rocket is a vehicle that moves by expelling gas out of its engine (Newton's third law- every action has an equal and opposite reaction)
2) purpose -carries satellite ,astronauts cargo ,probes into space.

Main parts of Rockets- 
-Propellent tanks : store fuel and oxidizer -engines :burn to create thrust 
-stages :multi stage sections that drop off to reduce weight.
 -pay load fairing: protect satellite/ cargo during launch -avionics: navigation, control ,and guidance system .

types of Rockets- _orbital launch vehicles _sub orbital Rockets _heavy lift Rockets _reusable rockets`,
  ai_advisor: `Your AI, which you could call Core Fact, is designed for one job: to be an always-accurate expert guide for your space commerce prototype.
Core Function:
The AI uses Natural Language Processing (NLP) to understand the meaning of a user's question, not just keywords. It then maps that intent to a predefined, expert-written answer from a secure dictionary (the Knowledge Base).

Why It's Always Accurate? 
The AI never "thinks" or tries to generate new information. Its response is a retrieval of a verified factâ€”it is engineered for reliability, not creativity.

What It Does?
1. Software Guide: Shows users exactly where to go for the Cost Estimation tool, Buy & Sell Commerce, and all other features.
2. Factual Authority: Answers questions about rockets, LEO, and Sustainability using its verified knowledge.
3. Safety Net: If a question is outside its limited scope, it clearly tells the user it doesn't know, preventing any incorrect or irrelevant answers.

In short, it's a smart, simple, server-side system built to provide guaranteed, correct guidance across your platform.`,

  phases_info: `The project will be implemented in three distinct phases, each focusing on a critical aspect of the space economy and sustainability.

Phase 1:
Phase of Transportation 
we will focus on Transportation of people and goods in outer space, with all the data and Benefits, as we promised.

Phase 2:
Phase of Trade
We will give our focus on buy and sell portals of products other than transportation

Phase 3:
Phase of Sustainability 
We will focus on a model that can predict the environmental impacts of any projects in their lifetime, and give them grades according to it.
So they can use that data to improve their products`,

  technical_approach:
    "DUMMY RESPONSE: TECHNICAL ARCHITECTURE INCLUDING FRONTEND AND BACKEND",

  feasibility: `this is a systematic study to test if your project can succeed. 

key types of feasibility assessment -

technical feasibility(tools ,tech., infrastructure required)
economic feasibility(cost vs. benifits )
operational feasibility(people and process readiness )
schedules feasibility(time available )
legal and ethical feasibility (compliance and risks)
market /user feasibility (demand and usability)


challenge mitigations 

once you excess feasibility, you will identify challenges. 

challenge mitigation - finding ways to reduce or remove those risk.

 steps-
1)identify challenges Limited budget ,lack of Technical expertise, time crunch ,data availability issues. 2)analyse impact and probability.
3) plan solutions`,

  impact_benefits: `ECONOMIC, ENVIRONMENTAL, AND SOCIAL IMPACTS`,
  research_references: `SOURCES AND REFERENCES USED IN NEXUS DEVELOPMENT`,
  space_transportation: `Outer space transportation refers to the comprehensive system, vehicles, and services involved in moving people, cargo, and spacecraft to, from, and within outer space, including suborbital trajectories.
It is defined by the activities of:
 * Earth-to-Orbit (ETO) Launch: The process of using launch vehicles (rockets) to overcome Earth's gravity and place a payload into orbit or on an escape trajectory.
 * In-Space Maneuvering: The movement of satellites, space stations, and crewed vehicles from one orbit to another (e.g., LEO to GEO, or to the Moon) using their own propulsion systems.
 * Planetary Surface Travel: The use of specialized rovers, landers, and pressurized vehicles for mobility on the surfaces of celestial bodies like the Moon and Mars.
In short, it is the logistical backbone of all space activity, enabling exploration, defense, scientific research, and commercial endeavors by providing the means to get people and resources where they need to go in the cosmos.

The benefits of effective (meaning efficient, reliable, and low-cost) outer space transportation are immense, impacting multiple sectors on Earth and accelerating space development.
Core Benefits:
 * Economic Growth and Commercialization:
   * Lower Costs: Reduced launch prices (via reusable rockets and efficiency) slash the barrier to entry, making space ventures financially viable for startups, universities, and small countries.
   * New Industries: Opens up the commercial space economy, including satellite servicing, space manufacturing, tourism, and resource utilization (e.g., asteroid mining). The global space economy is projected to grow dramatically due to these efficiencies.
 * Technological Innovation (Spin-offs):
   * Earth-Bound Advancements: The rigorous demands of effective space transport drive breakthroughs in materials science, propulsion, automation, robotics, and energy systems, many of which are later applied to terrestrial industries (e.g., medical devices, navigation, weather forecasting).
 * Global Connectivity and Services:
   * Enhanced Infrastructure: Enables the rapid and cost-effective deployment of large satellite constellations (like Starlink) for global broadband internet, high-precision GPS/navigation, and continuous Earth observation.
   * Disaster Response: Faster deployment of remote sensing satellites improves monitoring and communication during natural disasters and humanitarian crises.
 * Scientific Exploration and Knowledge:
   * Deeper Exploration: Allows for cheaper and more frequent missions to the Moon, Mars, and beyond, accelerating the search for life, understanding the universe, and studying Earth from a unique perspective (e.g., climate change monitoring).
   * In-Space Research: Enables the International Space Station (or future orbital platforms) to be more easily supplied, expanding microgravity research in medicine and materials.
 * Sustainability and Security:
   * Space Debris Mitigation: Efficient in-space transport capabilities (like Nemesis's vision for life-extension/de-orbiting) are essential for actively cleaning up or managing orbital debris, ensuring the long-term sustainability of the space environment.
   * Increased Resilience: A robust transport system provides redundancy and resilience for critical space assets, which underpin global communications, finance, and defense.

In summary, effective outer space transportation is a foundational enabler for the future of humanity in space, unlocking economic, technological, scientific, and societal benefits that extend far beyond the space sector itself.`,

  orbital_congestion: `orbital congestion happens when too many satellites and space objects occupy the same orbital regions ,especially popular ones like low Earth orbit (LEO) ,as more satellite ,Mega constellations (example: starlink) and Debris fill these orbits , the available safe "lanes"  for spacecraft become crowded .

orbital debaries 
(space junk) 
Defunct satellites, used rocket stages ,paint flakes and fragments from past collisions or explosions that continue to orbit Earth.
 Scale :
over 36000 objects larger than 10 cm are tracked by Agencies, millions of smaller pieces less than 1 CM are two tiny to track but still dangerous. (objects in Leo travel at ~7-8 km/s ,first enough).

Congestion risks- collision hazard- higher chances of satellite colliding, producing more debris .
service disruption- threatens GPS, communication, Earth observation ,and scientific missions.`,

  sustainability_index: `Score missions based on :
debris mitigation (0-30 points )
fuel efficiency(0-25 points)
 reusability(0-20 points)
 environmental compliance(0-25 points)
total =100 points Higher school means more sustainable mission`,

  business_simulation: `GUIDE TO SIMULATING BUSINESS MODELS IN NEXUS`,
  data_sources: `APIs AND DATA PIPELINES USED (E.G., CELESTRAK, NASA)`,
  india_space_role: `India's current role is that of a rising global space powerhouse, defined by major exploration success and a strategic shift toward commercialization.
Key Pillars of India's Space Role
 * Exploration Achievements: India is one of the few nations to have successfully landed a spacecraft near the Moon's South Pole (Chandrayaan-3) and is actively pursuing deep space science with missions like the Aditya-L1 solar probe.
 * Commercial Liberalization: The government has established regulatory bodies like IN-SPACe to foster the private sector, leading to rapid growth in space startups and commercial launch services. The goal is to dramatically increase India's share of the global space economy.
 * Human Spaceflight: The Gaganyaan Programme is actively developing the capability for India's first indigenous crewed mission to Low Earth Orbit, with a long-term goal of building the Bharatiya Antariksh Station by 2035.
 * Global Partner: India is deeply engaged in international cooperation, most notably through the joint NISAR Earth observation satellite with NASA and lunar exploration plans with JAXA.
`,
  kessler_syndrome: `The Kessler Syndrome and Its Prevention
What is the Kessler Syndrome?
The Kessler Syndrome, proposed by NASA scientist Donald Kessler in 1978, is a theoretical scenario in which the density of objects (satellites and debris) in Low Earth Orbit (LEO) becomes so high that collisions cascade exponentially.
In this scenario:
 * A collision between two large objects (e.g., a defunct satellite and a spent rocket stage) generates thousands of new, fast-moving debris fragments.
 * These new fragments increase the probability of hitting other satellites and debris.
 * Each subsequent collision creates more debris, leading to a self-sustaining chain reaction (a "snowball effect").
 * The final result is a dense band of debris that could render certain orbital altitudes virtually unusable for decades, severely limiting space access and destroying vital infrastructure like communication and navigation satellites.
Prevention and Mitigation Strategies
The global space community recognizes that both mitigation (prevention) and remediation (cleanup) are necessary to avert the Kessler Syndrome.
1. Mitigation (Preventing New Debris)
This focuses on responsible practices for newly launched missions:
 * 25-Year Rule: The most widely adopted guideline requiring all objects in LEO to be removed from orbit (either through de-orbiting or moving to a disposal orbit) within 25 years of the end of their mission.
 * Passivation: Designing rockets and satellites to eliminate all stored energy (like remaining fuel or pressurized batteries) at the end of their mission. This prevents large, explosive fragmentations that are a major source of small debris.
 * Collision Avoidance (CA): Routinely monitoring the trajectories of operational satellites using ground- and space-based tracking systems to identify potential close approaches and execute avoidance maneuvers.
 * Sustainable Design: Manufacturing spacecraft with systems, such as tethers or simple propulsion, that make end-of-life de-orbiting reliable and efficient. (This is central to your project's Sustainability Index).
2. Remediation (Active Debris Removal - ADR)
This focuses on actively cleaning up the existing catalog of large, non-maneuverable debris:
 * Debris Removal Missions: Developing and deploying specialized spacecraft to capture and de-orbit large, defunct objects.
   * Net Capture: Using large nets to ensnare a piece of debris.
   * Harpoons/Grapplers: Firing a harpoon or using robotic arms to physically latch onto a dead satellite. (e.g., ESA's planned ClearSpace-1 mission).
   * Space Tugs/Tow Trucks: Utilizing spacecraft equipped with reliable propulsion to dock with or attach to a piece of debris and pull it into a controlled re-entry path.
 * Non-Contact Methods: Researching technologies like powerful ground- or space-based lasers to gently push small debris fragments into a lower orbit where they will burn up harmlessly in the atmosphere, without creating more fragments.
`,
  rocket_fuels: `Rocket propellants are the chemical mixtures used to create the thrust needed for space travel, consisting of a fuel and an oxidizer. They fall into three main categories:
 * Liquid Propellants: These offer the highest control, as the fuel and oxidizer are stored separately and mixed in the combustion chamber.
   * Cryogenics (LH_2/LOX): Provide the highest performance, but require complex super-cooling for storage (e.g., Liquid Hydrogen and Liquid Oxygen).
   * Hydrocarbons (RP-1/LOX): Offer a better balance of density and handling, making them the standard "workhorse" for booster stages (e.g., Refined Kerosene and Liquid Oxygen).
   * Methane (LCH_4/LOX): The next generation, balancing performance and ease of production/storage, which is crucial for missions to Mars.
   * Hypergolics (e.g., Hydrazine): Ignite instantly on contact, making them highly reliable for in-space maneuvering and spacecraft control, though they are often toxic.
 * Solid Propellants: The fuel and oxidizer are pre-mixed into a solid block. They are simple, reliable, and provide massive initial thrust, but cannot be shut off or throttled once ignited. Used primarily for rocket boosters.
 * Hybrid Propellants: These combine a solid fuel with a liquid oxidizer. They offer a compromise, retaining the safety of solids while allowing for some throttling and restart capability.
Choosing the right propellant depends on mission requirements, including thrust needs, duration, cost, and handling considerations. Innovations in green propellants and in-situ resource utilization (e.g., producing methane on Mars) are shaping the future of rocket fuels.`,
  satellites: `Basic Info on Satellites and Earth Satellites
What is a Satellite?
A satellite is any object that orbits or circles a larger object in space.
 * Natural Satellites: Objects created by nature (e.g., the Moon is a natural satellite orbiting the Earth; the Earth is a natural satellite orbiting the Sun).
 * Artificial Satellites: Human-made machines launched into space that follow a fixed, repeatable path (an orbit) around the Earth or another celestial body. When people use the term "satellite," they almost always mean an artificial one.
Artificial Earth Satellites
These are machines placed into orbit around Earth, relying on gravity and their velocity to remain in a stable path without falling back to the surface.
Core Functions (What They Do):
Earth satellites are essential infrastructure for modern life, performing four main functions:
 * Communications: Act as relay stations to transmit TV, radio, telephone, and internet signals between distant points on Earth.
 * Navigation (GPS): Transmit precise timing and location signals that allow receivers (like your phone) to pinpoint your position anywhere on the globe.
 * Earth Observation/Remote Sensing: Take pictures and collect data on the planet's surface, atmosphere, and oceans. This is used for weather forecasting, climate monitoring, agriculture, and disaster management.
 * Scientific Research: Used as space telescopes to study distant galaxies (e.g., Hubble, James Webb) or as specialized probes to study the Earth's magnetic field and atmosphere.
Primary Orbit Types (Where They Operate):
The satellite's function dictates its orbit:
 * Low Earth Orbit (LEO): (160 km to 2,000 km altitude). Satellites here move very fast (orbiting in about 90 minutes). Used for highly detailed Earth observation, reconnaissance, and large communications constellations (like Starlink) that require low signal lag (low latency).
 * Geostationary Orbit (GEO): (sim35,786 km altitude). Satellites move at the same speed as the Earth's rotation, making them appear fixed over one spot on the equator. Ideal for broadcast TV and weather satellites, as ground antennas never have to move.
 * Medium Earth Orbit (MEO): (Between LEO and GEO). Used primarily by Global Navigation Satellite Systems (like GPS and India's NavIC).
`,
  orbital_debris: `Orbital Debris (Space Junk)
Orbital Debris (also known as space junk) is defined as any human-made object orbiting the Earth that no longer serves a useful purpose. It ranges in size from non-functional satellites and spent rocket stages down to microscopic flecks of paint.
Key Characteristics
 * Extreme Speed: Debris travels at orbital velocities, averaging around 17,500 mph (28,000 km/h) in Low Earth Orbit (LEO). At these speeds, even a millimeter-sized paint fleck can cause significant damage to an operational satellite or spacecraft due to the immense kinetic energy.
 * Vast Quantity: While only tens of thousands of objects larger than 10 cm are officially tracked, it is estimated that there are millions of smaller, untrackable pieces (down to 1 mm) in orbit.
 * Long Lifetime: Debris left in high orbits (above 800 km) can remain a threat for centuries because there is virtually no atmospheric drag to slow them down.
Primary Sources of Debris
 * Explosions/Fragmentations: This is the largest source of debris. It usually involves spent rocket upper stages or old satellites where residual fuel or pressurized components ignite, causing a massive breakup.
 * Collisions: Accidental or intentional impacts create massive, instant swarms of fragments. The most famous example is the 2009 collision between a functioning Iridium satellite and a defunct Russian Cosmos satellite.
 * Anti-Satellite (ASAT) Tests: Deliberate destruction of satellites by a military missile, such as the 2007 Chinese ASAT test, which created thousands of long-lived debris fragments.
 * Mission-Related Debris: Objects intentionally or accidentally released during launch or operations, such as lens caps, fasteners, separation mechanisms, or lost astronaut tools.
 * Defunct Spacecraft: Satellites that have reached the end of their operational life but lack the fuel or systems needed for a controlled de-orbit.
The Threat: Kessler Syndrome
The primary concern with orbital debris is the Kessler Syndrome, a cascading collision scenario. If the density of debris in a particular orbit reaches a critical point, a collision will trigger an avalanche of subsequent collisions, generating so much debris that the orbital region becomes effectively unusable, threatening the long-term sustainability of all human space activity.
`,
  leo_orbit: `Low Earth Orbit (LEO) is the region of space closest to Earth where most satellites and human spaceflight missions currently operate. It is the most accessible and commercially vital orbit today.
Characteristics
Altitude: LEO is generally defined as the region from about 160 km (100 miles) up to 2,000 km (1,240 miles) above the Earth's surface.

Speed & Period: Objects in LEO travel extremely fastâ€”around 7.8 km/sâ€”completing a full orbit around the Earth in just 90 minutes to 2 hours.

Atmospheric Drag: Satellites in LEO still encounter traces of the Earth's atmosphere (atmospheric drag). This drag causes them to slowly lose altitude, requiring occasional boosts (reboosts) or ensuring they de-orbit within a few years after their mission ends.

Inhabitants: LEO is home to the International Space Station (ISS, sim 400\text{ km}) and the vast majority of all launched artificial satellites.
`,
  satellite_constellations: `
A group of numerous, coordinated artificial satellites working together as a system (e.g., GPS, Starlink).
Purpose: To provide continuous, global, or near-global coverage for services that a single satellite cannot provide.
Key Advantage: Offers low signal latency and high data throughput, particularly in Low Earth Orbit (LEO).

`,
  space_tourism: `
Commercial space travel for recreational, leisure, or business purposes by paying customers.
Types: Ranges from suborbital flights (brief trips to the edge of space) to orbital flights (full orbits around Earth).
Market Trend: A rapidly growing, multi-billion-dollar market driven by reusable rocket technology and increasing private investment.

`,
  launch_vehicles: `
Rocket-powered systems designed to carry a payload (satellites or crewed spacecraft) from the Earthâ€™s surface to outer space.
Classification: Categorized by payload capacity (Small, Medium, Heavy, Super-Heavy Lift).
Propulsion: Most use liquid propellants (Kerosene, Hydrogen, Methane) or solid propellants, often in a multi-stage configuration.

`,
  reusable_rockets: `
Launch vehicles, or major components like the first stage booster, designed to be recovered intact, refurbished, and launched again.
Primary Benefit: Drastically reduces the cost per launch by spreading manufacturing costs across multiple missions.
Technology: Achieved primarily through propulsive landing (vertical landing using engine thrust) and advanced, durable materials.

`,
  space_stations: `
Large, crewed artificial satellites designed for extended human habitation in orbit.
Purpose: Primarily serve as orbital research laboratories for scientific experiments in microgravity, testing technology, and observing Earth and the cosmos.
Examples: The International Space Station (ISS) and China's Tiangong Space Station.

`,
  cargo_transport: `
The specialized process of using uncrewed or crewed spacecraft to ferry supplies, equipment, and experiments to orbital facilities like space stations.
Importance: Essential for maintaining a continuous human presence in space, delivering consumables (food, water, air), scientific gear, and disposing of waste upon re-entry.
Vehicles: Includes dedicated vehicles like the Dragon Cargo, Cygnus, and Russia's Progress spacecraft.

`,
  human_spaceflight: `
Space travel with a human crew or passengers aboard a spacecraft, often with the crew operating the vehicle.
Key Objectives: Investigating human ability to live and work in space, advancing scientific exploration, achieving national prestige, and eventually enabling deep-space colonization.
Programs: Includes historical projects (Mercury, Apollo), current operations (ISS), and future missions (Artemis, Gaganyaan).

`,
  orbital_parameters: `
The minimum set of six mathematical variables (known as orbital elements) required to uniquely define the path and orientation of an orbit in three-dimensional space.
Importance: Essential for mission planning, navigation, and predicting a satelliteâ€™s future position.
Key Examples: Semi-major axis (size/altitude), Eccentricity (shape/circularity), and Inclination (tilt relative to the equator).

`,
  tle_data: `
A standardized, compact text format used to encode the key orbital parameters and state vectors for a satellite at a specific point in time (the epoch).
Use Case: The widely used standard for tracking and predicting the positions of all orbiting objects (satellites and debris) by space agencies and commercial services worldwide.
Requirement: TLE data is time-sensitive and must be regularly updated to maintain accurate tracking due to orbital perturbations.

`,
};

// Intent keywords
const intentKeywords = {
  greetings: [
    "hello",
    "hi",
    "hey",
    "welcome",
    "greetings",
    "good morning",
    "good afternoon",
    "good evening",
    "start",
    "begin",
  ],
  cost_estimation: [
    "cost",
    "price",
    "estimation",
    "estimate",
    "budget",
    "money",
    "expensive",
    "cheap",
    "affordable",
    "pricing",
  ],
  knowledge_hub: [
    "knowledge",
    "hub",
    "resources",
    "learn",
    "information",
    "database",
    "research",
    "data",
    "facts",
  ],
  sustainability_hub: [
    "sustainability",
    "sustainable",
    "environment",
    "eco",
    "green",
    "carbon",
    "footprint",
    "index",
  ],
  buy_sell_commerce: [
    "buy",
    "sell",
    "purchase",
    "commerce",
    "marketplace",
    "trading",
    "store",
    "shop",
    "products",
    "services",
  ],
  software_guide: [
    "software",
    "guide",
    "how to use",
    "tutorial",
    "help",
    "instructions",
    "manual",
    "features",
  ],
  rocket_info: [
    "rocket",
    "rockets",
    "launch",
    "propulsion",
    "engine",
    "booster",
    "vehicle",
  ],
  ai_advisor: [
    "ai",
    "advisor",
    "artificial intelligence",
    "machine learning",
    "assistant",
    "chatbot",
  ],
  phases_info: [
    "phases",
    "project phases",
    "stages",
    "timeline",
    "roadmap",
    "development",
  ],
  technical_approach: [
    "technical",
    "architecture",
    "technology",
    "backend",
    "frontend",
    "system",
  ],
  feasibility: [
    "feasibility",
    "feasible",
    "challenges",
    "limitations",
    "problems",
    "issues",
  ],
  impact_benefits: [
    "impact",
    "benefits",
    "advantages",
    "economic",
    "social",
    "environmental",
  ],
  research_references: [
    "research",
    "references",
    "sources",
    "citations",
    "papers",
    "studies",
  ],
  space_transportation: [
    "space transportation",
    "transport",
    "travel",
    "journey",
    "movement",
  ],
  orbital_congestion: [
    "congestion",
    "crowded",
    "traffic",
    "collision",
    "avoidance",
  ],
  sustainability_index: ["index", "scoring", "rating", "gamified", "points"],
  business_simulation: [
    "simulation",
    "business model",
    "simulate",
    "modeling",
    "forecast",
  ],
  data_sources: [
    "data sources",
    "api",
    "celestrak",
    "nasa",
    "pipeline",
    "feeds",
  ],
  india_space_role: ["india", "isro", "in-space", "indian space", "role"],
  kessler_syndrome: ["kessler", "syndrome", "cascade", "chain reaction"],
  rocket_fuels: ["fuel", "fuels", "propellant", "combustion", "energy"],
  satellites: ["satellite", "satellites", "sat", "orbiting"],
  orbital_debris: ["debris", "junk", "waste", "fragments", "collision"],
  leo_orbit: ["leo", "low earth orbit", "altitude", "orbit"],
  satellite_constellations: [
    "constellation",
    "constellations",
    "network",
    "fleet",
  ],
  space_tourism: ["tourism", "tourist", "commercial", "civilian"],
  launch_vehicles: ["launch vehicle", "launcher", "carrier"],
  reusable_rockets: ["reusable", "reuse", "landing", "recovery"],
  space_stations: ["space station", "station", "habitat", "outpost"],
  cargo_transport: ["cargo", "freight", "goods", "supplies"],
  human_spaceflight: ["human", "crew", "astronaut", "manned"],
  orbital_parameters: ["parameters", "inclination", "eccentricity", "period"],
  tle_data: ["tle", "two-line element", "orbital elements", "tracking"],
};

// Similarity function
function calculateSimilarity(userInput, keywords) {
  const input = userInput.toLowerCase();
  let maxScore = 0;

  keywords.forEach((keyword) => {
    const keywordLower = keyword.toLowerCase();

    if (input.includes(keywordLower)) {
      maxScore = Math.max(maxScore, 1);
    }

    const inputWords = input.split(/\s+/);
    const keywordWords = keywordLower.split(/\s+/);

    const commonWords = inputWords.filter((word) =>
      keywordWords.some((kw) => kw.includes(word) || word.includes(kw))
    );

    const similarity =
      commonWords.length / Math.max(inputWords.length, keywordWords.length);
    maxScore = Math.max(maxScore, similarity);
  });

  return maxScore;
}

// Detect intent
export function detectIntent(userInput) {
  const results = [];

  Object.entries(intentKeywords).forEach(([intent, keywords]) => {
    const confidence = calculateSimilarity(userInput, keywords);
    if (confidence > 0) {
      results.push({ intent, confidence });
    }
  });

  results.sort((a, b) => b.confidence - a.confidence);

  if (results.length && results[0].confidence >= 0.5) {
    const bestMatch = results[0];
    return {
      intent: bestMatch.intent,
      confidence: bestMatch.confidence,
      response: knowledgeBase[bestMatch.intent],
    };
  }

  return {
    intent: "fallback",
    confidence: 0,
    response:
      "SORRY, I COULDN'T UNDERSTAND YOUR QUERY. PLEASE TRY REPHRASING OR ASK ABOUT NEXUS FEATURES LIKE COST ESTIMATION OR SUSTAINABILITY.",
  };
}
